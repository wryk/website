image: node:10

cache:
    paths:
        - node_modules/

stages:
    - build
    - deploy

build:
    stage: build

    script:
        - npm run build

    artifacts:
        paths:
            - public

# pages:
#     stage: deploy

#     artifacts:
#         paths:
#             - public

#     only:
#         - production

deploy:netlify:
    stage: deploy

    only:
        - production

    script:
        - npm i -g netlify-cli
        - netlify deploy -s $NETLIFY_SITE_ID -p public -t $NETLIFY_ACCESS_TOKEN -e production


